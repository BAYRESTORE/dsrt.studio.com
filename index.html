<section class="gallery">
  <h2 style="margin-bottom: 20px;">Preview Restore DSRT</h2>
  <div class="slider-wrapper">
    <div class="slider-container" id="sliderContainer">
      <img src="https://cacwogekvnrrmmnjtmql.supabase.co/storage/v1/object/public/restore/preview-before.jpg" alt="Sebelum" class="slider-img before">
      <img src="https://cacwogekvnrrmmnjtmql.supabase.co/storage/v1/object/public/restore/preview-after.jpg" alt="Sesudah" class="slider-img after" id="afterImage">
      <div class="slider-handle" id="sliderHandle"></div>
    </div>
  </div>
</section>

<style>
.gallery {
  width: 90%;
  max-width: 900px;
  margin: 80px auto;
  text-align: center;
}

.slider-wrapper {
  position: relative;
  width: 100%;
  overflow: hidden;
  border-radius: 16px;
  box-shadow: 0 0 20px rgba(0,0,0,0.4);
}

.slider-container {
  position: relative;
  width: 100%;
  height: auto;
  cursor: ew-resize;
}

.slider-img {
  display: block;
  width: 100%;
  height: auto;
  object-fit: cover;
  pointer-events: none;
}

.slider-img.before {
  position: relative;
  z-index: 1;
}

.slider-img.after {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 2;
  width: 100%;
  height: auto;
  clip-path: inset(0 50% 0 0);
  transition: clip-path 0.05s ease;
}

.slider-handle {
  position: absolute;
  top: 0;
  left: 50%;
  z-index: 3;
  width: 4px;
  height: 100%;
  background-color: #f0c040;
}
</style>

<script>
const container = document.getElementById('sliderContainer');
const handle = document.getElementById('sliderHandle');
const afterImage = document.getElementById('afterImage');

function updateSlider(x) {
  const bounds = container.getBoundingClientRect();
  let offsetX = x - bounds.left;
  offsetX = Math.max(0, Math.min(offsetX, bounds.width));

  const percentage = (offsetX / bounds.width) * 100;
  handle.style.left = percentage + '%';
  afterImage.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
}

container.addEventListener('mousemove', (e) => {
  updateSlider(e.clientX);
});

container.addEventListener('touchmove', (e) => {
  if (e.touches.length > 0) {
    updateSlider(e.touches[0].clientX);
  }
});
</script>
